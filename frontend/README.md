![CI](https://github.com/DmitriyIskra/chat-frontend/actions/workflows/web.yml/badge.svg)


## Реализованные функции

1. сохранение в истории ссылок и текстовых сообщений
   
   При отправке сообщения текстового или со ссылкой это сообщение на сервере попадает в базу - массив сообщений состоящий из объектов, один объект - одно сообщение.

   Если сообщение содержит ссылку то в файл stat добавляется статистика, что добавлено определенное количество ссылок.

2. ссылки (http:// или https://) должны быть кликабельны и отображаться, как ссылки;
   
   Введя сообщение в поле для отправки сообщения и нажав enter, сообщение сохраняется на сервере и прилетает ответом.

   Метод renderingMessage(data, mark) в классе redrawApp перебирает массив объектов сообщений и отправляет каждый объект в класс pattern, где в методе createMessage(data) оно проверяется на наличие ссылки при помощи регулярного выражения формируется необходимым образом и возвращается уже сформированным сообщением в renderingMessage где добавляется в поле для сообщений в приложении.
   
3. сохранение в истории изображений, видео и аудио (как файлов) — через Drag & Drop и через иконку загрузки;

    Для отправки файла необходимо нажать на крестик в левом нижнем углу приложения, или перетащить файл на этот же крестик

    Файл будет отправлен через метод getNewFile(formData, 'addFile/'); в классе redrawApp, а оттуда через метод create класса http, на сервер и там будет сохранен в подходящей папке (в зависимости от типа файла).

    сервер вернет объект с необходимыми данными для отрисовки сообщения, метод класса pattern проверит его и сформирует сообщение для вставки, вернет его и метод renderingMessage(data, mark) добавит его в поле для сообщений, с возможностью скачивания.

    статистика по количеству загруженных файлов и каких именно файлов (тип файла) в приложении и на сервере будет обновлена.
    Данные для статистики хранятся на сервере.
   
4. скачивание файлов на компьютер пользователя;
   
   В поле для сообщений, если в сообщении есть файл, то сообщения формируются с возможностью скачивания. Нажав на ссылку в сообщении (строка синего цвета) файл будет загружен на компьютер пользователя.

   метод downloadFile в redrawApp сделает запрос на сервер через класс http метод read передав путь по которому хранится необходимый файл на сервере.
   Сервер в свою очередь вернет blob. 

   Формируется ссылка куда добавляется url и имитируется клик по этой ссылке, в результате чего происходит скачивание.
   
5. ленивая подгрузка: сначала подгружаются последние 10 сообщений, при прокрутке вверх подгружаются следующие 10 и т. д.

    При загрузке приложения, загружаются только 10 последних сообщений, при прокрутке вверх, 
    сообщения догружаются по 10 штук.

    При скролле вверх, как только e.target.scrollTop === 0 вызываем метод reloadingMessages()
    в redrawApp, в этом методе делаем запрос this.http.read(numid, 'reloadingMessages/') через класс http, сервер отбирает следующие 10 сообщений и через метод renderingMessage(data, mark) отрисовываем их в поле для сообщений.
    
6. запись видео и аудио, используя API браузера;

    При нажатии и удерживании одного из значков, таких как микрофон или камера которые находятся в нижнем правом углу приложения, можно записать аудио или видео сообщение, в соответствии нажатого и удерживаемого значка. При отпускании значка (когда клавиша мыши возвращается вверх) запись остановится.

    Сообщение будет отправлено на сервер и сохранено в соответствующей папке, а в качестве ответа мы получим объект с данными для отрисовки сообщения и добавим сообщение в приложение в поле для сообщений, с возможностью скачивания.

    Из controlApp будет вызван метод recordAudio или recordAudio класса redrawApp, и при остановке записи когда кнопка мыши будет отпущена будет вызван метод this.getNewFile класса redrawApp, а в нем будет вызван метод create класса http, и файл будет отправлен на сервер, сохранен в соответствующую папку и в качестве ответа мы получим объект с данными для отрисовки сообщения и обновления статистики. И добавим сообщение в приложение с помощью renderingMessage класса redrawApp.

    статистика в приложении и на сервере будет обновлена. также по типу файла, аудио сообщение или видео сообщение.
   
7. отправка геолокации;
   
8. установка напоминаний и напоминания через Notification API: @schedule: 18:04 31.08.2019 «Последний день лета»;
   
9.  отправка команд боту: @chaos: погода, бот должен отвечать рандомным прогнозом погоды, интегрироваться с реальными сервисами не требуется, команд должно быть не менее 5;
    Команды:
        - @chaos: weather
        - @chaos: time
        - @chaos: date
        - @chaos: traffic
        - @chaos: new-year
  
10. просмотр вложений по категориям: аудио, видео, изображения, другие файлы (см. боковое меню Telegram);
